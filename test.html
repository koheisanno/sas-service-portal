<script>
document.addEventListener('DOMContentLoaded', function() {
    const config = {
        method: "GET",
        headers: {
            "content-type": "application/json"
        },
    };
    fetch("https://floating-brook-19253.herokuapp.com/api/club/",config)
        .then(response => response.json())
        .then(data => {
            var clubs = data;
            for(var i=0; i<clubs.length; i++){
                var div = document.createElement('div');
                var name = document.createElement('h2');
                name.innerHTML = clubs[i].name;
                div.appendChild(name);
                if(clubs[i].officers!=null){
                    var officersTitle = document.createElement('h3');
                    officersTitle.innerHTML = "Officers"
                    var sponsorsTitle = document.createElement('h3');
                    sponsorsTitle.innerHTML = "Sponsor(s)"
                    var officersArray = [];
                    var sponsorsArray = [];
                    var officers = document.createElement('h4');
                    var sponsors = document.createElement('h4');
                    for(var m=0; m<clubs[i].officers.length; m++){
                        if(/\d/.test(clubs[i].officers[m].email)){
                            officersArray.push(clubs[i].officers[m].firstName + " " + clubs[i].officers[m].lastName)
                        }
                        else{
                            sponsorsArray.push(clubs[i].officers[m].firstName + " " + clubs[i].officers[m].lastName)
                        }
                    }
                    if(officersArray.length>0){
                        officers.innerHTML = officersArray.join(", ");
                        div.appendChild(officersTitle);
                        div.appendChild(officers);
                    }
                    if(sponsorsArray.length>0){
                        sponsors.innerHTML = sponsorsArray.join(", ");
                        div.appendChild(sponsorsTitle);
                        div.appendChild(sponsors);
                    }
                }
                if(clubs[i].instagram!=null){
                    var instragramTitle = document.createElement('h5');
                    instragramTitle.innerHTML = "Instagram: @" + clubs[i].instagram;
                    div.appendChild(instragramTitle);
                }
                document.getElementById("clubList").appendChild(div);
            }    
    });
}, false);
</script>
<div id='clubList'>
</div>